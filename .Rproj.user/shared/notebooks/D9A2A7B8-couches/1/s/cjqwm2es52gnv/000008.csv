"0","library(dplyr)"
"0","library(stringr)"
"0","library(readr)"
"0","library(stargazer)"
"0","library(knitr)"
"0",""
"0","wrangle_airbnb_dataset <- function (raw_listing_full)"
"0","{"
"0","  listing.raw <- raw_listing_full  %>% "
"0","                select(price,number_of_reviews,beds,bathrooms,accommodates,reviews_per_month, property_type, room_type,review_scores_rating, neighbourhood_cleansed, neighbourhood_group_cleansed, latitude, longitude) %>% "
"0","                rename(Reviews = number_of_reviews) %>% "
"0","                rename(Beds = beds) %>% "
"0","                rename(Baths = bathrooms) %>% "
"0","                rename(Capacity = accommodates) %>% "
"0","                rename(Monthly_Reviews = reviews_per_month) %>% "
"0","                rename(Property_Type = property_type) %>% "
"0","                rename(Room_Type = room_type) %>% "
"0","                rename(Price = price) %>% "
"0","                rename(Rating = review_scores_rating) %>%"
"0","                rename(Neighbourhood = neighbourhood_cleansed) %>%"
"0","                rename(Region = neighbourhood_group_cleansed)"
"0",""
"0",""
"0","  listing.raw <-  listing.raw %>% "
"0","                mutate(Price = str_replace(Price, ""[$]"", """")) %>% "
"0","                mutate(Price = str_replace(Price, ""[,]"", """")) %>% "
"0","                mutate(Price = as.numeric(Price)) %>% "
"0","                mutate(Room_Type = factor(Room_Type, levels = c(""Shared room"", ""Private room"", ""Entire home/apt""))) %>% "
"0","                mutate(Capacity_Sqr = Capacity * Capacity) %>% "
"0","                mutate(Beds_Sqr = Beds * Beds) %>% "
"0","                mutate(Baths_Sqr = Baths * Baths) %>% "
"0","                mutate(ln_Price = log(1+Price)) %>% "
"0","                mutate(ln_Beds = log(1+Beds)) %>%"
"0","                mutate(ln_Baths = log(1+Baths)) %>% "
"0","                mutate(ln_Capacity = log(1+Capacity)) %>% "
"0","                mutate(ln_Rating = log(1+Rating)) %>% "
"0","                mutate(Shared_ind = ifelse(Room_Type == ""Shared room"",1,0)) %>% "
"0","                mutate(House_ind = ifelse(Room_Type == ""Entire home/apt"",1,0)) %>% "
"0","                mutate(Private_ind = ifelse(Room_Type == ""Private room"",1,0)) %>% "
"0","                mutate(Capacity_x_Shared_ind = Shared_ind * Capacity) %>% "
"0","                mutate(H_Cap = House_ind * Capacity) %>% "
"0","                mutate(P_Cap = Private_ind * Capacity) %>% "
"0","                mutate(ln_Capacity_x_Shared_ind = Shared_ind * ln_Capacity) %>% "
"0","                mutate(ln_Capacity_x_House_ind = House_ind * ln_Capacity) %>% "
"0","                mutate(ln_Capacity_x_Private_ind = Private_ind * ln_Capacity)"
"0",""
"0","  return(listing.raw)"
"0","}"
"0",""
"0","sin_listing.clean <- wrangle_airbnb_dataset(sin_listing)"
"0","head(sin_listing.clean)"
